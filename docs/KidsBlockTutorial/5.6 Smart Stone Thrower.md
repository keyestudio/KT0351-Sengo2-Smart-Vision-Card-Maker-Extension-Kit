# 5.6 Smart Stone Thrower

## 5.6.1 Overview

In this project, we build an interesting stone thrower car with automatic recognition by the AI vision module. We first need to mount the module on the car to enable its recognition function. If a bottle is detected, the buzzer will emit a countdown beeping from three and then the car will throw the bottle. After that, the throwing arm will slowly lower down to wait for the next recognition of a bottle.

## 5.6.2 Mount the AI module to the stone thrower car

**Required Parts**

![42](./media/42.png)

**Step 1:**

![43](./media/43.png)

**Step 2:**

![44](./media/44.png)

![45](./media/45.png)

**Step 3:**

![46](./media/46.png)

![47](./media/47.png)

**Step 4:**

| AI vision module | Car pins |
| :--------------: | :------: |
|   T/C (yellow)   |   SCL    |
|   R/D (white)    |   SDA    |
|    V/+ (red)     |    5V    |
|   G/- (black)    |    G     |

![56](./media/56.png)

**Completed:**

![48](./media/48.png)

## 5.6.3 Code Flow

![49](./media/49.png)

## 5.6.4 Test Code

If you want to build the code blocks by yourself, please load the functions of KS5002 robot car. Since the AI vision module needs to interact with this car, its functions will be used. After loading, we can directly drag its code blocks without adding them one by one.

![a73](./media/a73.png)

1. Set the communication mode of the AI vision module to `I2C`, and set it to run in `20Class` mode. Define a global int variable “item”.

![59](./media/59.png)

2. The if block determines the number of detections. Only when the number of detections is greater than 0 will the data be output. Note to choose `20Class`. Then, use ![60](./media/60.png) to check whether “Bottle” is detected.

![61](./media/61.png)

3. If “Bottle” is detected, the buzzer emit countdown beeping of three times with an interval of  0.5S.

![62](./media/62.png)

4. When the countdown ends, it throws the bottle: Set the servo to rotate to 90° with a delay of 1000ms. 

	After that, the throwing arm slowly puts down back: First set variable “item” to 90, and then repeat 45 times and subtract 1 from “item” in each loop; Set “item” as angle value followed by a 15ms delay. In this way, the servo will control the arm to slowly fall back once per cycle.

![63](./media/63.png)

**Complete code:**

![64](./media/64.png)

## 5.6.5 Test Result

After uploading the code, the AI vision module will activate the “20Class” mode and then recognize the captured images to determine if there is a bottle. If yes, it will throw the bottle. Before the throw, there will be three prompt sounds as a countdown. Once the countdown ends, the throw will proceed. After that, the throwing arm will slowly fall back to wait for the next instruction.
